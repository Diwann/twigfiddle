
	// vendor/hwi/oauth-bundle/HWI/OAuthBundle/OAuth/ResourceOwner/AbstractResourceOwner.php
	// @see https://github.com/hwi/HWIOAuthBundle/pull/657

    /**
     * Performs an HTTP request
     *
     * @param string $url     The url to fetch
     * @param string|array $content The content of the request
     * @param array  $headers The headers of the request
     * @param string $method  The HTTP method to use
     *
     * @return HttpMessageInterface The response content
     */
    protected function httpRequest($url, $content = null, $headers = array(), $method = null)
    {
        if (null === $method) {
            $method = null === $content ? HttpRequestInterface::METHOD_GET : HttpRequestInterface::METHOD_POST;
        }

        $request  = new HttpRequest($method, $url);
        $response = new HttpResponse();

//        $contentLength = 0;
//        if (is_string($content)) {
//            $contentLength = strlen($content);
//        } elseif (is_array($content)) {
//            $contentLength = strlen(implode('', $content));
//        }

        $headers = array_merge(
            array(
                'User-Agent: HWIOAuthBundle (https://github.com/hwi/HWIOAuthBundle)',
//                'Content-Length: ' . $contentLength,
            ),
            $headers
        );

        $request->setHeaders($headers);
        $request->setContent($content);

        $this->httpClient->send($request, $response);

        return $response;
    }

