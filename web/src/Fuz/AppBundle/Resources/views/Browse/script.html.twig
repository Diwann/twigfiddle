{# FuzAppBundle:Browse:script.html.twig #}
{# Included by: FuzAppBundle:Browse:index.html.twig #}
{# Included by: FuzAppBundle:Browse:search.html.twig #}

{#
 # This file is part of twigfiddle.com project.
 #
 # (c) Alain Tiemblo <alain@fuz.org>
 #
 # For the full copyright and license information, please view the LICENSE
 # file that was distributed with this source code.
 #}

<script type="text/javascript">

if (typeof $ !== 'undefined')
{

    {#
     #  Make tags having a tag layout
     #  Used in FuzAppBundle:Browse:filters.html.twig
     #}
     putTagStyle();

    {#
     #  Opens embedded form to edit a bookmark
     #  Used in FuzAppBundle:Browse:result.html.twig
     #}
    $('body').on('click', '.result-edit', function() {
        var that = $(this);
        var index = that.data('index');

        $('#edit-' + index).addClass('hide');
        $('#edit-' + index).attr('aria-hidden', 'true');

        $('.ro-' + index).addClass('hide');
        $('.ro-' + index).attr('aria-hidden', 'true');

        $('#save-' + index).removeClass('hide');
        $('#save-' + index).removeAttr('aria-hidden');

        $('.input-' + index).removeClass('hide');
        $('.input-' + index).removeAttr('aria-hidden');
    });

}

{#
 #  Make tags having a tag layout
 #  Used in FuzAppBundle:Browse:filters.html.twig
 #  Used in FuzAppBundle:Browse:result.html.twig
 #}
function putTagStyle() {
    $('.tags-input').each(function() {
        var that = $(this);
        if (that.data('has-tag-layout')) {
            return true;
        }
        that.data('has-tag-layout', true);
        that.tagsInput({
            'width': (that.width() + 26) + 'px',
            'height': '34px',
            'defaultText': 'Filter tags...',
            'placeholderColor' : '#999',
            'onAddTag': function (tag) {
                var tags = that.val().split(',');
                if (tags.length > 5 {# fiddle.max_tags #} ) {
                    that.importTags(tags.slice(0, 5 {# fiddle.max_tags #} ).join(','));
                }
            }
        });
    });
}

</script>